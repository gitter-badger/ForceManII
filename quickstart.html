<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>ForceManII: # Quick Start</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ForceManII
   &#160;<span id="projectnumber">0.1</span>
   </div>
   <div id="projectbrief">MM for QM People</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title"># Quick Start </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This page is intended to help you quickly add the ForceManII project to your existing code.</p>
<h2>Download and Compile</h2>
<p>The official repository for ForceManII is on GitHub at: <a href="https://github.com/ryanmrichard/ForceManII">https://github.com/ryanmrichard/ForceManII</a>. First you need to download the source using the normal git commands:</p>
<p>```.sh git clone <a href="https://github.com/ryanmrichard/ForceManII.git">https://github.com/ryanmrichard/ForceManII.git</a> &lt;where_to_put_it&gt; ``` The last argument is optional, if you don't use it the source will be downloaded into a subdirectory entitled <code>ForceManII</code> of the directory in which you ran git. For this tutorial we assume you maintained the default name. Once it is done downloading:</p>
<p>```.sh cd ForceManII #Configure the build cmake -H. -Bbuild -DCMAKE_CXX_COMILER=&lt;path_to_your_c++_compiler&gt; \ -DCMAKE_INSTALL_PREFIX=&lt;where_to_put_the_final_library&gt;</p>
<p>#Build the library cd build &amp;&amp; make</p>
<p>#Optionally test the library ctest</p>
<p>#Install the library (may require sudo depending on install location) make install</p>
<p>#Enjoy science ``` ForceManII has no dependencies aside from a C++11 compliant compiler and a relatively modern version of CMake (circa 2014 or later). That being said on most systems you will not even have to specify the CXX compiler as CMake will detect one automatically. As a CMake project, ForceManII strives to honor the usual CMake variables where appropriate; therefore power users should feel free to pass additional CMake variables for more fine-grained control.</p>
<h2>Using the ForceManII API</h2>
<p>The absolute simplest call to ForceManII is:</p>
<p>```.cpp #import &lt;<a class="el" href="FManII_8hpp_source.html">ForceManII/FManII.hpp</a>&gt;</p>
<p>auto deriv= FManII::run_forcemanii(order,carts,conns,FManII::get_ff(ff_name),types); ``` Here:</p>
<ul>
<li><code>order</code> is the derivative order you want (0=energy,1=gradient,2=Hessian, <em>etc.</em>).</li>
<li><code>carts</code> is a 3 by number of atoms <code>std::vector&lt;double&gt;</code> where <code>carts[i*3+j]</code> is the <img class="formulaInl" alt="$j$" src="form_27.png"/>-th Cartesian component ( <img class="formulaInl" alt="$j$" src="form_27.png"/>=0 is <img class="formulaInl" alt="$x$" src="form_115.png"/>, <img class="formulaInl" alt="$j$" src="form_27.png"/>=1 is <img class="formulaInl" alt="$y$" src="form_116.png"/>, <img class="formulaInl" alt="$j$" src="form_27.png"/>=2 is <img class="formulaInl" alt="$z$" src="form_117.png"/>) of the <img class="formulaInl" alt="$i$" src="form_25.png"/>-th atom.</li>
<li><code>conns</code> is an <code>std::vector&lt;std::vector&lt;size_t&gt;&gt;</code> (basically a matrix where the rows have variable lengths) such that <code>conns[i][j]</code> is the index of the <img class="formulaInl" alt="$j$" src="form_27.png"/>-th atom connected to the <img class="formulaInl" alt="$i$" src="form_25.png"/>-th atom (order being the same as carts)</li>
<li><a class="el" href="namespaceFManII.html#a2d06d9e8ab349eb7fa5bc7db05cb1a41" title="Returns the instance of built-in force fields.">FManII::get_ff()</a> is a helper function that will return any of the built-in force fields given...</li>
<li><code>ff_name</code> the name of the force field as an <code>std::string</code> currently we support<ul>
<li><code>AMBER99</code></li>
<li><code>CHARMM22</code></li>
<li><code>OPLSAA</code></li>
</ul>
</li>
<li><code>types</code> is an <code>std::vector&lt;size_t&gt;</code> where <code>types[i]</code> is the atom type of atom <img class="formulaInl" alt="$i$" src="form_25.png"/>. Numbering of atom types varies from force field to force field look in the ForceFields directory for more info</li>
<li><code>deriv</code> will be an <code>std::map&lt;std::string,std::vector&lt;double&gt;&gt;</code> where the key is a descriptive name of what derivative component you are looking at, <em>e.g.</em> the harmonic bond stretching term, and the value is the derivative in C++ order, <em>i.e.</em> row-major</li>
</ul>
<p>Where applicable, all units are atomic units, <em>i.e.</em> derivatives are Hartrees over Bohrs to the derivative order, input Cartesian coordinates are in Bhors.</p>
<p>The API to ForceManII is designed to be as flexible as possible while still maintaining simplicity. Therefore much of the flow of the program can be controlled from outside the library. For example, say you wanted to use a force field that is not included in ForceManII, you can do this by:</p>
<div class="fragment"><div class="line"><span class="comment">//Conversions are optional, default values exist</span></div>
<div class="line"><a class="code" href="classFManII_1_1ForceField.html" title="A struct to hold the details about a force field.">FManII::ForceField</a> my_ff=<a class="code" href="namespaceFManII.html#aeebcff203c7c0635246a53d059eb824c" title="Given a force field file in Tinker format makes a ForceField object.">FManII::parse_file</a></div>
<div class="line">(</div>
<div class="line">    std::move(std::istream(<span class="stringliteral">&quot;path/to/.prm/file&quot;</span>)),</div>
<div class="line">    your_kcalmol_2_hartree_conversion,</div>
<div class="line">    your_angstrom_2_bohr_conversion,</div>
<div class="line">    your_degree_2_radian_conversion</div>
<div class="line">);</div>
</div><!-- fragment --><p>You would now replace <a class="el" href="namespaceFManII.html#a2d06d9e8ab349eb7fa5bc7db05cb1a41" title="Returns the instance of built-in force fields.">FManII::get_ff()</a><code>with</code>my_ff` in the call to FManII::run_forcemanii().</p>
<p>The <a class="el" href="classFManII_1_1ForceField.html" title="A struct to hold the details about a force field.">FManII::ForceField</a> object is relatively simple, so if you wanted to make your own ForceField all you would need to do is set the membere appropriately and use the resulting instance.</p>
<p>The FManII::run_forcemanii() function is actually a thin wrapper around a series of steps: compute internal coordinates, assign parameters, and compute the derivative. The ForceManII API allows you to call each of those functions manually so you can further customize the command, or bypass a command completely and just use your own objects. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.3.1
</small></address>
</body>
</html>
